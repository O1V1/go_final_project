# Файлы для итогового задания

В директории `tests` находятся тесты для проверки API, которое должно быть реализовано в веб-сервере.

Директория `web` содержит файлы фронтенда.

# Оформление проекта

1) **Описание проекта** — для чего он создан, что он делает
На языке Go написан веб-сервер, который реализует функциональность простейшего планировщика задач, аналог TODO-листа. Проект создан для проверки и закрепления навыков по написанию веб-сервера, работе с REST API и базами данных.
Планировщик хранит задачи, каждая из них содержит дату дедлайна и заголовок с комментарием. Задачи могут повторяться по заданному правилу. Если отметить такую задачу как выполненную, она переносится на следующую дату в соответствии с правилом. Обычные задачи при выполнении будут просто удаляться.
API содержит следующие операции:
    - добавить задачу;
    - получить список задач;
    - удалить задачу;
    - получить параметры задачи;
    - изменить параметры задачи;
    - отметить задачу как выполненную.


2) **Список выполенных заданий со звёздочкой.** Выполнены все задания со звездочкой, а именно:
- реализована возможность определять порт при запуске сервера через переменную окружения
- реализована возможность определять путь к файлу базы данных через переменную окружения
- реализована работа правила повторения в указанные пользователем дни недели
- реализована работа правила повторения в указанные дни каждого месяца, либо указанных месяцев
- реализована возможность выбрать задачи через строку поиска
- подключен к веб-серверу механизм аутентификации
- реализована проверка аутентификации для следующих API-запросов:
    `/api/task` — все поддерживаемые HTTP методы;
    `/api/tasks` — получение списка задач;
    `/api/task/done` — запрос на выполнение задачи.
- реализовано оформление проекта: в файл readme.md добавлено описание в соответствии с ТЗ


3) **Инструкция по запуску кода локально**: дополнительные флаги, примеры `.env` и так далее. Напишите, какой адрес следует указывать в браузере
Для запуска кода нужно в терминале исполлнить команду `go run .`
По умолчанию используются следующие знаачения:
    - порт 7540
    - файл базы данных называется `scheduler.db` и находится в текущей рабочей директории проекта 

Для перехода на страницу аутентификации при использовании по умолчанию порта 7540, необходимо перейти в браузере по адресу `http://localhost:7540/login.html`, если используется иной порт, в запросе нужно указать нужный порт. 

При необходимости возможно изменить следующие переменные окружения: `TODO_PORT`, `TODO_DBFILE`, `TODO_PASSWORD`, в коде реализована проверка перечисленных переменных и их приоритетное использование в случае, если они заданы.


4) **Инструкция по запуску тестов**. Укажите, какие параметры в `tests/settings.go` следует использовать
Для тестирования использовались следующие параметры:
    var Port = 7540
    var DBFile = "../scheduler.db"
    var FullNextDate = true
    var Search = true
    var Token = `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MjQwMjg1ODksInBhc3N3b3JkSGFzaCI6ImE2NjVhNDU5MjA0MjJmOWQ0MTdlNDg2N2VmZGM0ZmI4YTA0YTFmM2ZmZjFmYTA3ZTk5OGU4NmY3ZjdhMjdhZTMifQ.0VofdtF9fWCrPO7vYKXXTgCJ9FK3x8k0ohPhW_s1RAA`


5) **Инструкция по сборке и запуску проекта через докер** — если вы это сделали
Для сборки через докер необходимо в терминале перейти в директорию проекта и выполнить команду
`docker build --tag go_final_project:v1 .`
эта команда создаст образ с именем go_final_project и тегом v1 на основе инструкций из Dockerfile

Для запуска проекта можно использовать команду 
`docker run -p 7540:7540 go_final_project:v1`
эта команда запустит контейнер из образа go_final_project с тегом v1 и отобразит порт 7540 контейнера на порт 7540 хоста. Это позволит получить доступ через браузер 

Для использования веб сервера нужно в браузере перейти на страницу идентификации по адресу `http://localhost:7540/login.html`


6) Дополнительное задание
Проведен рефакторинг проекта с целью улучшения гибкости, масштабируемости и поддерживаемости приложения путем разделения его на независимые функциональные слои.
Код разделен на несколько пакетов, которые можно  соответствии с layers architecture разделить на следуюищие слои:

    * Entities Layer 
            - пакет entities хранит структуры записей в БД, респонсов
    * Repository Layer 
            - пакет storage взаимодействует с БД 
            (создание бд, подключение к бд, работа с записями в бд)
    * Service Layer 
            - пакет service отвечает за бизнес-логику 
            (в рамках этого проекта бизнес-логикой можно считать задания, связанные с нахождением nextDate, согласно логике повторений, описанной в ТЗ)
    * Controller Layer - содержит пакеты, которые отвечают 
        за обратку запросов клиента:
            - auth аутентификация и авторизация
            - api настройка api обработчиков
            - router маршрутизация запросов обработчикам
            - handlers обработчики запросов
        и за инфраструктуру проекта:
            - server запуск HTTP сервера
            - config определение констант и переменных


Каждый слой отвечает за свою отдельную функциональность, а взаимодействие между слоями осуществляется через интерфейсы. 





